(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[334],{50201:function(){},27202:function(ve,H,l){"use strict";l.r(H),l.d(H,{default:function(){return le}});var I=l(58024),G=l(39144),Q=l(13254),h=l(14277),me=l(89816),X=l(28684),fe=l(57663),M=l(71577),se=l(62350),re=l(75443),xe=l(48736),w=l(27049),ue=l(34792),V=l(48086),Ce=l(71153),q=l(60331),E=l(11849),Z=l(2824),f=l(67294),L=l(43653),d=l(81907),s=l(57338),v=l(25084),t=l(13062),i=l(71230),Y=l(43358),x=l(16317),P=l(89032),r=l(15746),F=l(47673),u=l(4107),J=l(9715),n=l(86585),e=l(85893),S=function(c){var a=c.parent,g=c.visible,y=c.onCancel,O=c.onCreated,N=(0,f.useState)("10"),B=(0,Z.Z)(N,2),C=B[0],z=B[1],T=n.Z.useForm(),R=(0,Z.Z)(T,1),m=R[0],U=function(){y(m)},k=function(){m.validateFields().then(function(p){O(a?(0,E.Z)((0,E.Z)({},p),{},{parent_id:a.id}):p,m)}).catch(function(p){var ce=p.errorFields;ce.length>0&&V.default.error("\u8BF7\u5B8C\u6210\u5FC5\u586B\u9879\u5185\u5BB9")})},j=function(p){z(p)};return(0,e.jsx)(v.Z,{title:"\u65B0\u5EFA\u83DC\u5355",width:450,visible:g,onClose:U,maskClosable:!1,footer:(0,e.jsx)("div",{style:{textAlign:"right",marginRight:10},children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(M.Z,{onClick:U,style:{marginRight:10},children:"\u5173\u95ED"}),(0,e.jsx)(M.Z,{type:"primary",onClick:k,children:"\u4FDD\u5B58"})]})}),children:(0,e.jsx)(n.Z,{initialValues:{type:C},layout:"vertical",form:m,onFinish:k,children:(0,e.jsxs)(i.Z,{gutter:[16,16],children:[a&&(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(n.Z.Item,{label:"\u4E0A\u7EA7\u83DC\u5355",children:(0,e.jsx)(u.Z,{value:a.title,disabled:!0,placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u83DC\u5355"})})}),(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(n.Z.Item,{name:"type",label:"\u9009\u62E9\u7C7B\u578B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u83DC\u5355\u7C7B\u578B"}],children:(0,e.jsxs)(x.Z,{allowClear:!0,style:{width:"100%"},onChange:j,children:[(0,e.jsx)(x.Z.Option,{value:"10",children:"\u8DEF\u7531\u83DC\u5355"}),(0,e.jsx)(x.Z.Option,{value:"20",children:"\u63A5\u53E3\u83DC\u5355"})]})})}),C==="10"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(n.Z.Item,{name:"title",label:"\u8DEF\u7531\u6807\u9898",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8DEF\u7531\u6807\u9898"}],children:(0,e.jsx)(u.Z,{allowClear:!0,placeholder:"\u8BF7\u586B\u5199\u8DEF\u7531\u6807\u9898"})})}),(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(n.Z.Item,{name:"name",label:"\u8DEF\u7531\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8DEF\u7531\u540D\u79F0"}],children:(0,e.jsx)(u.Z,{allowClear:!0,placeholder:"\u8BF7\u586B\u5199\u8DEF\u7531\u540D\u79F0"})})}),(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(n.Z.Item,{name:"path",label:"\u8DEF\u7531\u5730\u5740",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8DEF\u7531\u5730\u5740"}],children:(0,e.jsx)(u.Z,{allowClear:!0,placeholder:"\u8BF7\u586B\u5199\u8DEF\u7531\u5730\u5740"})})}),(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(n.Z.Item,{name:"component",label:"\u7EC4\u4EF6\u5730\u5740",children:(0,e.jsx)(u.Z,{allowClear:!0,placeholder:"\u8BF7\u586B\u5199\u7EC4\u4EF6\u5730\u5740"})})}),(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(n.Z.Item,{name:"icon",label:"\u56FE\u6807\u540D\u79F0",children:(0,e.jsx)(u.Z,{allowClear:!0,placeholder:"\u8BF7\u586B\u5199\u56FE\u6807\u540D\u79F0"})})})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(n.Z.Item,{name:"title",label:"\u63A5\u53E3\u6807\u9898",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u63A5\u53E3\u6807\u9898"}],children:(0,e.jsx)(u.Z,{allowClear:!0,placeholder:"\u8BF7\u586B\u5199\u63A5\u53E3\u6807\u9898"})})}),(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(n.Z.Item,{name:"path",label:"\u63A5\u53E3\u5730\u5740",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u63A5\u53E3\u5730\u5740"}],children:(0,e.jsx)(u.Z,{allowClear:!0,placeholder:"\u8BF7\u586B\u5199\u63A5\u53E3\u5730\u5740"})})})]}),(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(n.Z.Item,{name:"sort",label:"\u6392\u5E8F",children:(0,e.jsx)(u.Z,{allowClear:!0,placeholder:"\u8BF7\u586B\u5199\u6392\u5E8F"})})})]})})})},K=S,je=l(62999),ie=l(12010),oe=l(19206),_=function(c){var a=c.fields,g=c.visible,y=c.onCancel,O=c.onUpdated,N=(0,f.useState)([]),B=(0,Z.Z)(N,2),C=B[0],z=B[1],T=n.Z.useForm(),R=(0,Z.Z)(T,1),m=R[0];(0,f.useEffect)(function(){Object.keys(a).length>0&&(m.setFieldsValue((0,E.Z)((0,E.Z)({},a),{},{type:String(a.type),parent_id:a.parent_id>0?a.parent_id:void 0})),(0,oe.ev)({id:a.id}).then(function(j){j.status==="success"&&z(j.data.list)}))},[c.fields]);var U=function(){y(m)},k=function(){m.validateFields().then(function($){O((0,E.Z)((0,E.Z)({},$),{},{id:a.id,type:a.type}),m)}).catch(function($){var p=$.errorFields;p.length>0&&V.default.error("\u8BF7\u5B8C\u6210\u5FC5\u586B\u9879\u5185\u5BB9")})};return(0,e.jsx)(v.Z,{title:"\u66F4\u65B0\u83DC\u5355",width:450,visible:g,onClose:U,maskClosable:!1,footer:(0,e.jsx)("div",{style:{textAlign:"right",marginRight:10},children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(M.Z,{onClick:U,style:{marginRight:10},children:"\u5173\u95ED"}),(0,e.jsx)(M.Z,{type:"primary",onClick:k,children:"\u4FDD\u5B58"})]})}),children:(0,e.jsx)(n.Z,{layout:"vertical",form:m,onFinish:k,children:(0,e.jsxs)(i.Z,{gutter:[16,16],children:[(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(n.Z.Item,{name:"type",label:"\u9009\u62E9\u7C7B\u578B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u83DC\u5355\u7C7B\u578B"}],children:(0,e.jsxs)(x.Z,{disabled:!0,style:{width:"100%"},children:[(0,e.jsx)(x.Z.Option,{value:"10",children:"\u8DEF\u7531\u83DC\u5355"}),(0,e.jsx)(x.Z.Option,{value:"20",children:"\u63A5\u53E3\u83DC\u5355"})]})})}),C.length>0&&(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(n.Z.Item,{name:"parent_id",label:"\u6240\u5C5E\u4E0A\u7EA7",children:(0,e.jsx)(ie.Z,{allowClear:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:C,placeholder:"\u8BF7\u9009\u62E9\u6240\u5C5E\u90E8\u95E8",treeDefaultExpandAll:!0})})}),a&&a.type===10?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(n.Z.Item,{name:"title",label:"\u8DEF\u7531\u6807\u9898",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8DEF\u7531\u6807\u9898"}],children:(0,e.jsx)(u.Z,{allowClear:!0,placeholder:"\u8BF7\u586B\u5199\u8DEF\u7531\u6807\u9898"})})}),(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(n.Z.Item,{name:"name",label:"\u8DEF\u7531\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8DEF\u7531\u540D\u79F0"}],children:(0,e.jsx)(u.Z,{allowClear:!0,placeholder:"\u8BF7\u586B\u5199\u8DEF\u7531\u540D\u79F0"})})}),(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(n.Z.Item,{name:"path",label:"\u8DEF\u7531\u5730\u5740",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8DEF\u7531\u5730\u5740"}],children:(0,e.jsx)(u.Z,{allowClear:!0,placeholder:"\u8BF7\u586B\u5199\u8DEF\u7531\u5730\u5740"})})}),(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(n.Z.Item,{name:"component",label:"\u7EC4\u4EF6\u5730\u5740",children:(0,e.jsx)(u.Z,{allowClear:!0,placeholder:"\u8BF7\u586B\u5199\u7EC4\u4EF6\u5730\u5740"})})}),(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(n.Z.Item,{name:"icon",label:"\u56FE\u6807\u540D\u79F0",children:(0,e.jsx)(u.Z,{allowClear:!0,placeholder:"\u8BF7\u586B\u5199\u56FE\u6807\u540D\u79F0"})})})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(n.Z.Item,{name:"title",label:"\u63A5\u53E3\u6807\u9898",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u63A5\u53E3\u6807\u9898"}],children:(0,e.jsx)(u.Z,{allowClear:!0,placeholder:"\u8BF7\u586B\u5199\u63A5\u53E3\u6807\u9898"})})}),(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(n.Z.Item,{name:"path",label:"\u63A5\u53E3\u5730\u5740",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u63A5\u53E3\u5730\u5740"}],children:(0,e.jsx)(u.Z,{allowClear:!0,placeholder:"\u8BF7\u586B\u5199\u63A5\u53E3\u5730\u5740"})})})]}),(0,e.jsx)(r.Z,{span:24,children:(0,e.jsx)(n.Z.Item,{name:"sort",label:"\u6392\u5E8F",children:(0,e.jsx)(u.Z,{allowClear:!0,placeholder:"\u8BF7\u586B\u5199\u6392\u5E8F"})})})]})})})},de=_,ee=function(c){var a=c.loading,g=c.dispatch,y=c.permission.list,O=(0,f.useState)(),N=(0,Z.Z)(O,2),B=N[0],C=N[1],z=(0,f.useState)({defaultExpandAllRows:!0}),T=(0,Z.Z)(z,1),R=T[0],m=(0,f.useState)(!1),U=(0,Z.Z)(m,2),k=U[0],j=U[1],$=(0,f.useState)(!1),p=(0,Z.Z)($,2),ce=p[0],he=p[1],Fe=(0,f.useState)(),Ze=(0,Z.Z)(Fe,2),pe=Ze[0],ge=Ze[1],te=(0,L.md)();(0,f.useEffect)(function(){ne()},[]);var ne=function(){g({type:"permission/fetch"})},Ee=function(o,b){g({type:"permission/created",payload:(0,E.Z)({},o),callback:function(A){A.status==="success"&&(j(!1),ne(),b.resetFields())}})},ye=function(o,b){g({type:"permission/updated",payload:(0,E.Z)({},o),callback:function(A){A.status==="success"&&(he(!1),ne(),b.resetFields())}})},Be=function(o){o&&g({type:"permission/deleted",payload:{id:o},callback:function(ae){ae.status==="success"&&ne()}})},De=[{title:"\u6807\u9898",dataIndex:"title",key:"title",width:"20%",rules:[{required:!0,message:"\u6807\u9898\u4E3A\u5FC5\u586B\u9879"}]},{title:"\u56FE\u6807",dataIndex:"icon",key:"icon",hideInForm:!0,width:"10%",render:function(o){return o||"-"}},{title:"\u8DEF\u7531\u5730\u5740",dataIndex:"path",key:"path"},{title:"\u7EC4\u4EF6",dataIndex:"component",key:"component"},{title:"\u7C7B\u578B",dataIndex:"type",hideInForm:!0,render:function(o){return o==10?(0,e.jsx)(q.Z,{color:"#87d068",children:"\u8DEF\u7531"}):(0,e.jsx)(q.Z,{color:"#2db7f5",children:"\u63A5\u53E3"})}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(o,b,ae){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(L.Nv,{accessible:te.canPermissionCreated,fallback:(0,e.jsx)("a",{style:{padding:0},onClick:function(){return V.default.error("\u60A8\u6CA1\u6709\u6743\u9650")},children:"-"}),children:(0,e.jsx)("a",{style:{padding:0},onClick:function(){C(b),j(!0)},children:"\u65B0\u589E\u4E0B\u7EA7"})}),(0,e.jsx)(w.Z,{type:"vertical"}),(0,e.jsx)(L.Nv,{accessible:te.canPermissionUpdated,fallback:(0,e.jsx)("a",{style:{padding:0},onClick:function(){return V.default.error("\u60A8\u6CA1\u6709\u6743\u9650")},children:"-"}),children:(0,e.jsx)("a",{style:{padding:0},onClick:function(){C(b),ge(b),he(!0)},children:"\u66F4\u65B0"})}),(0,e.jsx)(w.Z,{type:"vertical"}),(0,e.jsx)(L.Nv,{accessible:te.canPermissionDeleted,fallback:(0,e.jsx)("a",{style:{padding:0},onClick:function(){return V.default.error("\u60A8\u6CA1\u6709\u6743\u9650")},children:"-"}),children:(0,e.jsx)(re.Z,{title:"\u786E\u8BA4\u8981\u5220\u9664\u8BE5\u4FE1\u606F?",onConfirm:function(){return Be(b.id)},okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",children:(0,e.jsx)("a",{style:{padding:0},children:"\u5220\u9664"})})})]})}}],be=function(){var o=te.canPermissionCreated;return o?(0,e.jsx)(M.Z,{type:"primary",onClick:function(){return j(!0)},children:"\u65B0\u589E"}):null};return(0,e.jsx)(d.ZP,{children:(0,e.jsxs)(G.Z,{title:"\u5217\u8868",extra:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(be,{})}),children:[y&&y.length>0?(0,e.jsx)(X.Z,{rowKey:"id",pagination:!1,loading:a,columns:De,dataSource:y,expandable:R}):(0,e.jsx)(h.Z,{image:h.Z.PRESENTED_IMAGE_SIMPLE,description:(0,e.jsx)("span",{children:"\u6682\u65E0\u6570\u636E"})}),B?(0,e.jsx)(K,{visible:k,parent:B,onCreated:Ee,onCancel:function(o){j(!1),C(void 0),o.resetFields()}}):(0,e.jsx)(K,{visible:k,onCreated:Ee,onCancel:function(o){j(!1),o.resetFields()}}),pe&&(0,e.jsx)(de,{visible:ce,fields:pe,onUpdated:ye,onCancel:function(o){he(!1),o.resetFields()}})]})})},le=(0,L.$j)(function(W){var c=W.permission,a=W.loading;return{permission:c,loading:a.models.permission}})(ee)},60331:function(ve,H,l){"use strict";l.d(H,{Z:function(){return L}});var I=l(96156),G=l(22122),Q=l(28481),h=l(67294),me=l(94184),X=l.n(me),fe=l(98423),M=l(54549),se=l(65632),re=function(d,s){var v={};for(var t in d)Object.prototype.hasOwnProperty.call(d,t)&&s.indexOf(t)<0&&(v[t]=d[t]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(d);i<t.length;i++)s.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(d,t[i])&&(v[t[i]]=d[t[i]]);return v},xe=function(s){var v,t=s.prefixCls,i=s.className,Y=s.checked,x=s.onChange,P=s.onClick,r=re(s,["prefixCls","className","checked","onChange","onClick"]),F=h.useContext(se.E_),u=F.getPrefixCls,J=function(K){x==null||x(!Y),P==null||P(K)},n=u("tag",t),e=X()(n,(v={},(0,I.Z)(v,"".concat(n,"-checkable"),!0),(0,I.Z)(v,"".concat(n,"-checkable-checked"),Y),v),i);return h.createElement("span",(0,G.Z)({},r,{className:e,onClick:J}))},w=xe,ue=l(98787),V=l(97202),Ce=function(d,s){var v={};for(var t in d)Object.prototype.hasOwnProperty.call(d,t)&&s.indexOf(t)<0&&(v[t]=d[t]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(d);i<t.length;i++)s.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(d,t[i])&&(v[t[i]]=d[t[i]]);return v},q=new RegExp("^(".concat(ue.Y.join("|"),")(-inverse)?$")),E=new RegExp("^(".concat(ue.E.join("|"),")$")),Z=function(s,v){var t,i=s.prefixCls,Y=s.className,x=s.style,P=s.children,r=s.icon,F=s.color,u=s.onClose,J=s.closeIcon,n=s.closable,e=n===void 0?!1:n,S=Ce(s,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),K=h.useContext(se.E_),je=K.getPrefixCls,ie=K.direction,oe=h.useState(!0),_=(0,Q.Z)(oe,2),de=_[0],ee=_[1];h.useEffect(function(){"visible"in S&&ee(S.visible)},[S.visible]);var le=function(){return F?q.test(F)||E.test(F):!1},W=(0,G.Z)({backgroundColor:F&&!le()?F:void 0},x),c=le(),a=je("tag",i),g=X()(a,(t={},(0,I.Z)(t,"".concat(a,"-").concat(F),c),(0,I.Z)(t,"".concat(a,"-has-color"),F&&!c),(0,I.Z)(t,"".concat(a,"-hidden"),!de),(0,I.Z)(t,"".concat(a,"-rtl"),ie==="rtl"),t),Y),y=function(m){m.stopPropagation(),u==null||u(m),!m.defaultPrevented&&("visible"in S||ee(!1))},O=function(){return e?J?h.createElement("span",{className:"".concat(a,"-close-icon"),onClick:y},J):h.createElement(M.Z,{className:"".concat(a,"-close-icon"),onClick:y}):null},N="onClick"in S||P&&P.type==="a",B=(0,fe.Z)(S,["visible"]),C=r||null,z=C?h.createElement(h.Fragment,null,C,h.createElement("span",null,P)):P,T=h.createElement("span",(0,G.Z)({},B,{ref:v,className:g,style:W}),z,O());return N?h.createElement(V.Z,null,T):T},f=h.forwardRef(Z);f.displayName="Tag",f.CheckableTag=w;var L=f},71153:function(ve,H,l){"use strict";var I=l(43673),G=l.n(I),Q=l(50201),h=l.n(Q)}}]);
