(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[892],{19422:function(){},99696:function(be,_,n){"use strict";n.r(_),n.d(_,{default:function(){return q}});var w=n(11849),me=n(71194),W=n(57016),a=n(3182),Se=n(62350),G=n(75443),je=n(57663),O=n(71577),Ie=n(34792),B=n(48086),b=n(93224),D=n(2824),pe=n(94043),u=n.n(pe),S=n(67294),L=n(43653),ve=n(81907),fe=n(85224),he=n(2625),oe=n(57119),P=n(35348);function ie(v){return ee.apply(this,arguments)}function ee(){return ee=(0,a.Z)(u().mark(function v(d){return u().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,P.Z)("/propose/index/list",{params:d}));case 1:case"end":return m.stop()}},v)})),ee.apply(this,arguments)}function ce(v){return te.apply(this,arguments)}function te(){return te=(0,a.Z)(u().mark(function v(d){return u().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,P.Z)("/propose/index/detail",{method:"POST",data:(0,w.Z)({},d)}));case 1:case"end":return m.stop()}},v)})),te.apply(this,arguments)}function de(v){return ne.apply(this,arguments)}function ne(){return ne=(0,a.Z)(u().mark(function v(d){return u().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,P.Z)("/propose/index/freeze",{method:"POST",data:(0,w.Z)({},d)}));case 1:case"end":return m.stop()}},v)})),ne.apply(this,arguments)}function o(v){return r.apply(this,arguments)}function r(){return r=(0,a.Z)(u().mark(function v(d){return u().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,P.Z)("/propose/index/unfreeze",{method:"POST",data:(0,w.Z)({},d)}));case 1:case"end":return m.stop()}},v)})),r.apply(this,arguments)}function i(){return p.apply(this,arguments)}function p(){return p=(0,a.Z)(u().mark(function v(){return u().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,P.Z)("/propose/index/generate"));case 1:case"end":return c.stop()}},v)})),p.apply(this,arguments)}function E(){return x.apply(this,arguments)}function x(){return x=(0,a.Z)(u().mark(function v(){return u().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,P.Z)("/propose/index/export"));case 1:case"end":return c.stop()}},v)})),x.apply(this,arguments)}function Z(){return j.apply(this,arguments)}function j(){return j=(0,a.Z)(u().mark(function v(){return u().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,P.Z)("/propose/index/items"));case 1:case"end":return c.stop()}},v)})),j.apply(this,arguments)}var R=n(57338),T=n(25084),I=n(98858),C=n(4914),t=n(85893),k=function(d){var c=d.visible,m=d.fields,re=d.onCancel,ye=(0,S.useState)(),le=(0,D.Z)(ye,2),e=le[0],xe=le[1];return(0,S.useEffect)(function(){Object.keys(m).length>0&&ce({id:m.id}).then(function(se){se.status==="success"?xe(se.data):B.default.error(se.message)})},[d.fields]),(0,t.jsx)(T.Z,{width:850,visible:c,maskClosable:!0,onClose:re,footer:(0,t.jsx)("div",{style:{textAlign:"right",marginRight:10},children:(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(O.Z,{onClick:re,children:"\u5173\u95ED"})})}),children:e&&(0,t.jsxs)(C.Z,{title:"\u516C\u544A\u8BE6\u60C5",bordered:!0,children:[(0,t.jsx)(C.Z.Item,{label:"\u59D3\u540D",children:e!=null&&e.real_name?e==null?void 0:e.real_name:"-"}),(0,t.jsx)(C.Z.Item,{label:"\u5355\u4F4D",children:e!=null&&e.department_name?e==null?void 0:e.department_name:"-"}),(0,t.jsx)(C.Z.Item,{label:"\u5C97\u4F4D",children:e!=null&&e.job_name?e==null?void 0:e.job_name:"-"}),(0,t.jsx)(C.Z.Item,{label:"\u9879\u76EE\u540D\u79F0",span:2,children:e!=null&&e.project_name?e==null?void 0:e.project_name:"-"}),(0,t.jsx)(C.Z.Item,{label:"\u5EFA\u8BAE\u7C7B\u522B",span:1,children:e!=null&&e.type_name?e==null?void 0:e.type_name:"-"}),(0,t.jsx)(C.Z.Item,{label:"\u95EE\u9898\u73B0\u72B6",span:3,children:e!=null&&e.problem?e==null?void 0:e.problem:"-"}),(0,t.jsx)(C.Z.Item,{label:"\u95EE\u9898\u73B0\u72B6\u8D44\u6599\u5730\u5740",span:3,children:e!=null&&e.problem_path?(0,t.jsx)("a",{href:e==null?void 0:e.problem_path,target:"_blank",children:"\u67E5\u770B\u8D44\u6599"}):(0,t.jsx)("span",{children:"-"})}),(0,t.jsx)(C.Z.Item,{label:"\u65B9\u6CD5\u63AA\u65BD",span:3,children:e!=null&&e.measure?e==null?void 0:e.measure:"-"}),(0,t.jsx)(C.Z.Item,{label:"\u65B9\u6CD5\u63AA\u65BD\u8D44\u6599\u5730\u5740",span:3,children:e!=null&&e.measure_path?(0,t.jsx)("a",{href:e==null?void 0:e.measure_path,target:"_blank",children:"\u67E5\u770B\u8D44\u6599"}):(0,t.jsx)("span",{children:"-"})}),(0,t.jsx)(C.Z.Item,{label:"\u9884\u671F\u6548\u679C",span:3,children:e!=null&&e.effect?e==null?void 0:e.effect:"-"}),(0,t.jsx)(C.Z.Item,{label:"\u9884\u671F\u6548\u679C\u8D44\u6599\u5730\u5740",span:3,children:e!=null&&e.effect_path?(0,t.jsx)("a",{href:e==null?void 0:e.effect_path,target:"_blank",children:"\u67E5\u770B\u8D44\u6599"}):(0,t.jsx)("span",{children:"-"})})]})})},g=k,ae=n(43358),U=n(16317),V=function(d){var c=d.department;return(0,t.jsx)(U.Z,{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u90E8\u95E8",options:c,value:d.value,onChange:d.onChange})},K=V,J=function(d){var c=d.job;return(0,t.jsx)(U.Z,{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u5C97\u4F4D",options:c,value:d.value,onChange:d.onChange})},F=J,Q=function(d){var c=d.options;return(0,t.jsx)(U.Z,{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u5C97\u4F4D",options:c,value:d.value,onChange:d.onChange})},H=Q,X=function(){var d=(0,S.useState)(!1),c=(0,D.Z)(d,2),m=c[0],re=c[1],ye=(0,S.useState)([]),le=(0,D.Z)(ye,2),e=le[0],xe=le[1],se=(0,S.useState)({}),Fe=(0,D.Z)(se,2),Te=Fe[0],$e=Fe[1],Ne=(0,S.useState)(!1),we=(0,D.Z)(Ne,2),ze=we[0],Ae=we[1],Oe=(0,S.useState)([]),De=(0,D.Z)(Oe,2),ke=De[0],Me=De[1],Le=(0,S.useState)([]),Be=(0,D.Z)(Le,2),Ue=Be[0],We=Be[1],Ge=(0,S.useState)([]),Pe=(0,D.Z)(Ge,2),Ve=Pe[0],Ke=Pe[1],Ze=(0,S.useRef)(),ue=(0,L.md)(),Je=(0,L.YB)();(0,S.useEffect)(function(){var f=!1;return Z().then(function(l){l.status==="success"&&(f||(Me(l.data.department),We(l.data.job),Ke(l.data.type)))}),function(){f=!0}},[]);var He=[{title:"\u59D3\u540D",dataIndex:"real_name"},{title:"\u90E8\u95E8",dataIndex:"department_name",hideInSearch:!0,hideInForm:!0},{title:"\u5C97\u4F4D",dataIndex:"job_name",hideInSearch:!0,hideInForm:!0},{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"project_name"},{title:"\u90E8\u95E8",key:"department_id",hideInTable:!0,dataIndex:"department_id",renderFormItem:function(l,s,y){var h=s.type,$=s.defaultRender,N=(0,b.Z)(s,["type","defaultRender"]);if(h==="form")return null;var z=y.getFieldValue("department_id");return(0,t.jsx)(K,{value:z,department:ke})}},{title:"\u5C97\u4F4D",key:"job_id",hideInTable:!0,dataIndex:"job_id",renderFormItem:function(l,s,y){var h=s.type,$=s.defaultRender,N=(0,b.Z)(s,["type","defaultRender"]);if(h==="form")return null;var z=y.getFieldValue("job_id");return(0,t.jsx)(F,{value:z,job:Ue})}},{title:"\u7C7B\u578B",key:"type",hideInTable:!0,dataIndex:"type",renderFormItem:function(l,s,y){var h=s.type,$=s.defaultRender,N=(0,b.Z)(s,["type","defaultRender"]);if(h==="form")return null;var z=y.getFieldValue("type_id");return(0,t.jsx)(H,{value:z,options:Ve})}},{title:"\u5EFA\u8BAE\u7C7B\u578B",dataIndex:"type_name",hideInSearch:!0,hideInForm:!0},{title:"\u72B6\u6001",dataIndex:"status",hideInForm:!0,valueEnum:{10:{text:"\u5F85\u9605",status:"Processing"},20:{text:"\u5DF2\u9605",status:"Success"},40:{text:"\u51BB\u7ED3",status:"Error"},80:{text:"\u91C7\u7EB3",status:"Success"}}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"created_at",key:"created_at",valueType:"dateTime",hideInSearch:!0,sorter:function(l,s){return l.created_at-s.created_at}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"created_at",valueType:"dateRange",hideInTable:!0,search:{transform:function(l){return{startTime:l[0],endTime:l[1]}}}},{title:(0,t.jsx)(L._H,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(l,s){return[(0,t.jsx)(L.Nv,{accessible:ue.canProposeDetail,fallback:(0,t.jsx)("a",{onClick:function(){return B.default.error("\u6CA1\u6709\u6743\u9650")},children:"-"}),children:(0,t.jsx)("a",{onClick:function(){$e(s),re(!0)},children:"\u8BE6\u60C5"})},"a")]}}],Re=function(){var l=ue.canProposeGenerate;return l?(0,t.jsx)(G.Z,{title:"\u786E\u5B9A\u8981\u751F\u6210Excel\u6587\u6863?",onConfirm:et,onCancel:nt,okText:"Yes",cancelText:"No",children:(0,t.jsx)(O.Z,{type:"primary",children:"\u751F\u6210\u8868\u683C"},"primary")}):null},Ye=function(){var l=ue.canProposeExport;return l?(0,t.jsx)(O.Z,{type:"link",onClick:tt,children:"\u5BFC\u51FA\u8868\u683C"},"link"):null},Qe=function(){var l=ue.canProposeFreeze;return l?(0,t.jsx)(O.Z,{danger:!0,type:"primary",onClick:(0,a.Z)(u().mark(function s(){return u().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,qe(e);case 2:case"end":return h.stop()}},s)})),children:"\u6279\u91CF\u51BB\u7ED3"}):null},Xe=function(){var l=ue.canProposeUnfreeze;return l?(0,t.jsx)(O.Z,{type:"primary",onClick:(0,a.Z)(u().mark(function s(){return u().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,_e(e);case 2:case"end":return h.stop()}},s)})),children:"\u6279\u91CF\u89E3\u51BB"}):null},qe=function(){var f=(0,a.Z)(u().mark(function l(s){return u().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:W.Z.confirm({icon:(0,t.jsx)(oe.Z,{}),title:"\u63D0\u793A",content:"\u51BB\u7ED3\u540E\u65E0\u6CD5\u4F7F\u7528\uFF0C\u786E\u5B9A\u8981\u6279\u91CF\u51BB\u7ED3\u9009\u62E9\u9879\uFF1F",onOk:function(){return(0,a.Z)(u().mark(function N(){var z,M,Y;return u().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,de({key:s.map(function(ge){return ge.id})});case 2:z=A.sent,z.status==="success"&&((M=Ze.current)===null||M===void 0||(Y=M.reloadAndRest)===null||Y===void 0||Y.call(M),B.default.success("\u64CD\u4F5C\u6210\u529F"));case 4:case"end":return A.stop()}},N)}))()}});case 1:case"end":return h.stop()}},l)}));return function(s){return f.apply(this,arguments)}}(),_e=function(){var f=(0,a.Z)(u().mark(function l(s){return u().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:W.Z.confirm({icon:(0,t.jsx)(oe.Z,{}),title:"\u63D0\u793A",content:"\u89E3\u51BB\u540E\u6062\u590D\u4F7F\u7528\uFF0C\u786E\u5B9A\u8981\u6279\u91CF\u89E3\u51BB\u9009\u62E9\u9879\uFF1F",onOk:function(){return(0,a.Z)(u().mark(function N(){var z,M,Y;return u().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,o({key:s.map(function(ge){return ge.id})});case 2:z=A.sent,z.status==="success"&&((M=Ze.current)===null||M===void 0||(Y=M.reloadAndRest)===null||Y===void 0||Y.call(M),B.default.success("\u64CD\u4F5C\u6210\u529F"));case 4:case"end":return A.stop()}},N)}))()}});case 1:case"end":return h.stop()}},l)}));return function(s){return f.apply(this,arguments)}}();function et(){return Ce.apply(this,arguments)}function Ce(){return Ce=(0,a.Z)(u().mark(function f(){var l;return u().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,i();case 2:l=y.sent,l.status==="success"?(Ae(!0),B.default.success("\u751F\u6210\u6210\u529F\uFF0C\u8BF7\u70B9\u51FB\u5BFC\u51FA\u8868\u683C")):B.default.error(l.message);case 4:case"end":return y.stop()}},f)})),Ce.apply(this,arguments)}function tt(){return Ee.apply(this,arguments)}function Ee(){return Ee=(0,a.Z)(u().mark(function f(){var l,s,y;return u().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,E();case 2:l=$.sent,l.status==="success"?(s=document.createElement("a"),y=document.createEvent("MouseEvents"),s.style.display="none",s.href=l.data.path,s.download=l.data.filename,document.body.appendChild(s),y.initEvent("click",!1,!1),s.dispatchEvent(y),document.body.removeChild(s),B.default.success("\u5BFC\u51FA\u6210\u529F")):B.default.error(l.message);case 4:case"end":return $.stop()}},f)})),Ee.apply(this,arguments)}var nt=function(l){B.default.error("Click on No")};return(0,t.jsxs)(ve.ZP,{children:[(0,t.jsx)(he.ZP,{headerTitle:Je.formatMessage({id:"pages.searchTable.title",defaultMessage:"Enquiry form"}),actionRef:Ze,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return ze?[(0,t.jsx)(Re,{}),(0,t.jsx)(Ye,{})]:[(0,t.jsx)(Re,{})]},request:function(){var f=(0,a.Z)(u().mark(function l(s,y,h){return u().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",ie((0,w.Z)((0,w.Z)({},s),y)));case 1:case"end":return N.stop()}},l)}));return function(l,s,y){return f.apply(this,arguments)}}(),columns:He,rowSelection:{onChange:function(l,s){xe(s)}}}),(e==null?void 0:e.length)>0&&(0,t.jsxs)(fe.Z,{extra:(0,t.jsxs)("div",{children:[(0,t.jsx)(L._H,{id:"pages.searchTable.chosen",defaultMessage:"\u5DF2\u9009\u62E9"})," ",(0,t.jsx)("a",{style:{fontWeight:600},children:e.length})," ",(0,t.jsx)(L._H,{id:"pages.searchTable.item",defaultMessage:"\u9879"})]}),children:[(0,t.jsx)(Xe,{}),(0,t.jsx)(Qe,{})]}),(0,t.jsx)(g,{visible:m,fields:Te,onCancel:function(){return re(!1)}})]})},q=X},4914:function(be,_,n){"use strict";n.d(_,{K:function(){return P},Z:function(){return ne}});var w=n(96156),me=n(28481),W=n(90484),a=n(67294),Se=n(94184),G=n.n(Se),je=n(50344),O=n(24308),Ie=n(21687),B=n(65632),b=n(22122);function D(o){return o!=null}var pe=function(r){var i=r.itemPrefixCls,p=r.component,E=r.span,x=r.className,Z=r.style,j=r.labelStyle,R=r.contentStyle,T=r.bordered,I=r.label,C=r.content,t=r.colon,k=p;if(T){var g;return a.createElement(k,{className:G()((g={},(0,w.Z)(g,"".concat(i,"-item-label"),D(I)),(0,w.Z)(g,"".concat(i,"-item-content"),D(C)),g),x),style:Z,colSpan:E},D(I)&&a.createElement("span",{style:j},I),D(C)&&a.createElement("span",{style:R},C))}return a.createElement(k,{className:G()("".concat(i,"-item"),x),style:Z,colSpan:E},a.createElement("div",{className:"".concat(i,"-item-container")},I&&a.createElement("span",{className:G()("".concat(i,"-item-label"),(0,w.Z)({},"".concat(i,"-item-no-colon"),!t)),style:j},I),C&&a.createElement("span",{className:G()("".concat(i,"-item-content")),style:R},C)))},u=pe;function S(o,r,i){var p=r.colon,E=r.prefixCls,x=r.bordered,Z=i.component,j=i.type,R=i.showLabel,T=i.showContent,I=i.labelStyle,C=i.contentStyle;return o.map(function(t,k){var g=t.props,ae=g.label,U=g.children,V=g.prefixCls,K=V===void 0?E:V,J=g.className,F=g.style,Q=g.labelStyle,H=g.contentStyle,X=g.span,q=X===void 0?1:X,v=t.key;return typeof Z=="string"?a.createElement(u,{key:"".concat(j,"-").concat(v||k),className:J,style:F,labelStyle:(0,b.Z)((0,b.Z)({},I),Q),contentStyle:(0,b.Z)((0,b.Z)({},C),H),span:q,colon:p,component:Z,itemPrefixCls:K,bordered:x,label:R?ae:null,content:T?U:null}):[a.createElement(u,{key:"label-".concat(v||k),className:J,style:(0,b.Z)((0,b.Z)((0,b.Z)({},I),F),Q),span:1,colon:p,component:Z[0],itemPrefixCls:K,bordered:x,label:ae}),a.createElement(u,{key:"content-".concat(v||k),className:J,style:(0,b.Z)((0,b.Z)((0,b.Z)({},C),F),H),span:q*2-1,component:Z[1],itemPrefixCls:K,bordered:x,content:U})]})}var L=function(r){var i=a.useContext(P),p=r.prefixCls,E=r.vertical,x=r.row,Z=r.index,j=r.bordered;return E?a.createElement(a.Fragment,null,a.createElement("tr",{key:"label-".concat(Z),className:"".concat(p,"-row")},S(x,r,(0,b.Z)({component:"th",type:"label",showLabel:!0},i))),a.createElement("tr",{key:"content-".concat(Z),className:"".concat(p,"-row")},S(x,r,(0,b.Z)({component:"td",type:"content",showContent:!0},i)))):a.createElement("tr",{key:Z,className:"".concat(p,"-row")},S(x,r,(0,b.Z)({component:j?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},i)))},ve=L,fe=function(r){var i=r.children;return i},he=fe,oe=n(96159),P=a.createContext({}),ie={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function ee(o,r){if(typeof o=="number")return o;if((0,W.Z)(o)==="object")for(var i=0;i<O.c4.length;i++){var p=O.c4[i];if(r[p]&&o[p]!==void 0)return o[p]||ie[p]}return 3}function ce(o,r,i){var p=o;return(r===void 0||r>i)&&(p=(0,oe.Tm)(o,{span:i}),(0,Ie.Z)(r===void 0,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),p}function te(o,r){var i=(0,je.Z)(o).filter(function(Z){return Z}),p=[],E=[],x=r;return i.forEach(function(Z,j){var R,T=(R=Z.props)===null||R===void 0?void 0:R.span,I=T||1;if(j===i.length-1){E.push(ce(Z,T,x)),p.push(E);return}I<x?(x-=I,E.push(Z)):(E.push(ce(Z,I,x)),p.push(E),x=r,E=[])}),p}function de(o){var r,i=o.prefixCls,p=o.title,E=o.extra,x=o.column,Z=x===void 0?ie:x,j=o.colon,R=j===void 0?!0:j,T=o.bordered,I=o.layout,C=o.children,t=o.className,k=o.style,g=o.size,ae=o.labelStyle,U=o.contentStyle,V=a.useContext(B.E_),K=V.getPrefixCls,J=V.direction,F=K("descriptions",i),Q=a.useState({}),H=(0,me.Z)(Q,2),X=H[0],q=H[1],v=ee(Z,X);a.useEffect(function(){var c=O.ZP.subscribe(function(m){(0,W.Z)(Z)==="object"&&q(m)});return function(){O.ZP.unsubscribe(c)}},[]);var d=te(C,v);return a.createElement(P.Provider,{value:{labelStyle:ae,contentStyle:U}},a.createElement("div",{className:G()(F,(r={},(0,w.Z)(r,"".concat(F,"-").concat(g),g&&g!=="default"),(0,w.Z)(r,"".concat(F,"-bordered"),!!T),(0,w.Z)(r,"".concat(F,"-rtl"),J==="rtl"),r),t),style:k},(p||E)&&a.createElement("div",{className:"".concat(F,"-header")},p&&a.createElement("div",{className:"".concat(F,"-title")},p),E&&a.createElement("div",{className:"".concat(F,"-extra")},E)),a.createElement("div",{className:"".concat(F,"-view")},a.createElement("table",null,a.createElement("tbody",null,d.map(function(c,m){return a.createElement(ve,{key:m,index:m,colon:R,prefixCls:F,vertical:I==="vertical",bordered:T,row:c})}))))))}de.Item=he;var ne=de},98858:function(be,_,n){"use strict";var w=n(43673),me=n.n(w),W=n(19422),a=n.n(W)}}]);
