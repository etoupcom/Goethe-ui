(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[295],{19422:function(){},29396:function(ve,Y,t){"use strict";t.r(Y),t.d(Y,{default:function(){return K}});var D=t(93224),ae=t(57663),B=t(71577),r=t(34792),le=t(48086),H=t(71194),re=t(57016),b=t(3182),N=t(2824),se=t(94043),i=t.n(se),x=t(67294),L=t(43653),z=t(81907),G=t(85224),oe=t(57119),ie=t(2625),_=t(11849),V=t(35348);function ce(y){return A.apply(this,arguments)}function A(){return A=(0,b.Z)(i().mark(function y(d){return i().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,V.Z)("/system/log/list",{method:"GET",params:(0,_.Z)({},d)}));case 1:case"end":return s.stop()}},y)})),A.apply(this,arguments)}function ee(){return J.apply(this,arguments)}function J(){return J=(0,b.Z)(i().mark(function y(){return i().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,V.Z)("/system/log/options"));case 1:case"end":return n.stop()}},y)})),J.apply(this,arguments)}function te(y){return Q.apply(this,arguments)}function Q(){return Q=(0,b.Z)(i().mark(function y(d){return i().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,V.Z)("/system/log/deleted",{method:"POST",data:(0,_.Z)({},d)}));case 1:case"end":return s.stop()}},y)})),Q.apply(this,arguments)}var de=t(43358),ue=t(16317),e=t(85893),a=function(d){var n=d.project,s=(0,x.useState)([]),C=(0,N.Z)(s,2),R=C[0],w=C[1];return(0,x.useEffect)(function(){var F=n.map(function(I){return{value:I.id,label:I.name}});w(F)},[n]),(0,e.jsx)(ue.Z,{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u9879\u76EE",options:R,value:d.value,onChange:d.onChange})},l=a,o=t(62999),f=t(12010),m=function(d){var n=d.department;return(0,e.jsx)(f.Z,{allowClear:!0,placeholder:"\u8BF7\u9009\u62E9\u9879\u76EE",treeData:n,value:d.value,onChange:d.onChange})},u=m,g=t(57338),E=t(25084),P=t(98858),c=t(4914),S=t(30381),M=t.n(S),T=function(d){var n=d.fields,s=d.visible,C=d.onCancel;return(0,e.jsx)(E.Z,{width:800,visible:s,onClose:C,closable:!0,footer:(0,e.jsx)("div",{style:{textAlign:"right",marginRight:10},children:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(B.Z,{onClick:C,children:"\u5173\u95ED"})})}),children:n&&(0,e.jsxs)(c.Z,{title:"\u65E5\u5FD7\u8BE6\u60C5",bordered:!0,children:[(0,e.jsx)(c.Z.Item,{label:"\u59D3\u540D",children:n==null?void 0:n.real_name}),(0,e.jsx)(c.Z.Item,{label:"\u9879\u76EE",span:2,children:n!=null&&n.project_name?n==null?void 0:n.project_name:"-"}),(0,e.jsx)(c.Z.Item,{label:"\u8D26\u53F7",children:n==null?void 0:n.username}),(0,e.jsx)(c.Z.Item,{label:"\u90E8\u95E8",span:2,children:n!=null&&n.department_name?n==null?void 0:n.department_name:"-"}),(0,e.jsx)(c.Z.Item,{label:"\u6807\u9898",children:n==null?void 0:n.title}),(0,e.jsx)(c.Z.Item,{label:"Host",span:2,children:n==null?void 0:n.host}),(0,e.jsx)(c.Z.Item,{label:"\u64CD\u4F5C\u65E5\u5FD7",span:3,children:n==null?void 0:n.remark}),(0,e.jsx)(c.Z.Item,{label:"\u64CD\u4F5C\u65F6\u95F4",span:3,children:M()(n.created_at).format("YYYY.MM.DD HH:mm:ss")})]})})},h=T,U=function(){var d=(0,x.useState)(!1),n=(0,N.Z)(d,2),s=n[0],C=n[1],R=(0,x.useRef)(),w=(0,x.useState)(),F=(0,N.Z)(w,2),I=F[0],ne=F[1],X=(0,x.useState)([]),W=(0,N.Z)(X,2),xe=W[0],Ce=W[1],Ze=(0,x.useState)([]),fe=(0,N.Z)(Ze,2),ge=fe[0],Ee=fe[1],Se=(0,x.useState)([]),he=(0,N.Z)(Se,2),k=he[0],pe=he[1],je=(0,L.md)();(0,x.useEffect)(function(){var Z=!1;return ee().then(function(p){p.status==="success"&&(Z||(Ce(p.data.project),Ee(p.data.department)))}),function(){Z=!0}},[]);var De=function(){var Z=(0,b.Z)(i().mark(function p(v){return i().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:re.Z.confirm({icon:(0,e.jsx)(oe.Z,{}),title:"\u63D0\u793A",content:"\u5220\u9664\u540E\u65E0\u6CD5\u663E\u793A\uFF0C\u786E\u5B9A\u8981\u6279\u91CF\u5220\u9664\u9009\u62E9\u9879\uFF1F",onOk:function(){te({key:v.map(function(q){return q.id})}).then(function(q){if(q.status==="success"){var O,me;pe([]),(O=R.current)===null||O===void 0||(me=O.reloadAndRest)===null||me===void 0||me.call(O),le.default.success("\u64CD\u4F5C\u6210\u529F")}})}});case 1:case"end":return j.stop()}},p)}));return function(v){return Z.apply(this,arguments)}}(),Ie=function(){var p=je.canLogDeleted;return p?(0,e.jsx)(B.Z,{danger:!0,type:"primary",onClick:(0,b.Z)(i().mark(function v(){return i().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,De(k);case 2:case"end":return j.stop()}},v)})),children:(0,e.jsx)(L._H,{id:"pages.searchTable.batchDeletion",defaultMessage:"Batch deletion"})}):null},be=(0,L.YB)(),Pe=[{title:"\u8D26\u53F7",dataIndex:"username",key:"username",tip:"\u70B9\u51FB\u67E5\u770B\u8BE6\u60C5",render:function(p,v){return(0,e.jsx)("a",{onClick:function(){ne(v),C(!0)},children:p})}},{title:"\u59D3\u540D",dataIndex:"real_name",key:"real_name",width:100},{title:"\u9879\u76EE",dataIndex:"project_name",key:"project_name",width:100,ellipsis:!0,hideInSearch:!0,hideInForm:!0},{title:"\u90E8\u95E8",dataIndex:"department_name",key:"department_name",width:100,ellipsis:!0,hideInSearch:!0,hideInForm:!0},{title:"\u6807\u9898",dataIndex:"title",key:"title",width:100},{title:"\u64CD\u4F5C",dataIndex:"remark",key:"remark",width:245,ellipsis:!0},{title:"\u9879\u76EE",key:"project_id",hideInTable:!0,dataIndex:"project_id",renderFormItem:function(p,v,$){var j=v.type,ye=v.defaultRender,q=(0,D.Z)(v,["type","defaultRender"]);if(j==="form")return null;var O=$.getFieldValue("project_id");return(0,e.jsx)(l,{value:O,project:xe})}},{title:"\u90E8\u95E8",key:"department_id",hideInTable:!0,dataIndex:"department_id",renderFormItem:function(p,v,$){var j=v.type,ye=v.defaultRender,q=(0,D.Z)(v,["type","defaultRender"]);if(j==="form")return null;var O=$.getFieldValue("department_id");return(0,e.jsx)(u,{value:O,department:ge})}},{title:"\u64CD\u4F5C\u65F6\u95F4",dataIndex:"created_at",key:"created_at",valueType:"dateTime",hideInSearch:!0,sorter:function(p,v){return p.created_at-v.created_at}},{title:"\u64CD\u4F5C\u65F6\u95F4",dataIndex:"created_at",valueType:"dateRange",hideInTable:!0,search:{transform:function(p){return{startTime:p[0],endTime:p[1]}}}},{title:(0,e.jsx)(L._H,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",width:100,render:function(p,v){return[(0,e.jsx)("a",{onClick:function(){ne(v),C(!0)},children:"\u8BE6\u60C5"},"a")]}}];return(0,e.jsxs)(z.ZP,{children:[(0,e.jsx)(ie.ZP,{headerTitle:be.formatMessage({id:"pages.searchTable.title",defaultMessage:"Enquiry form"}),actionRef:R,rowKey:"id",search:{labelWidth:120},request:ce,columns:Pe,rowSelection:{onChange:function(p,v){pe(v)}}}),(k==null?void 0:k.length)>0&&(0,e.jsx)(G.Z,{extra:(0,e.jsxs)("div",{children:[(0,e.jsx)(L._H,{id:"pages.searchTable.chosen",defaultMessage:"Chosen"})," ",(0,e.jsx)("a",{style:{fontWeight:600},children:k.length})," ",(0,e.jsx)(L._H,{id:"pages.searchTable.item",defaultMessage:"\u9879"})]}),children:(0,e.jsx)(Ie,{})}),I&&(0,e.jsx)(h,{fields:I,visible:s,onCancel:function(){return C(!1)}})]})},K=U},4914:function(ve,Y,t){"use strict";t.d(Y,{K:function(){return A},Z:function(){return ue}});var D=t(96156),ae=t(28481),B=t(90484),r=t(67294),le=t(94184),H=t.n(le),re=t(50344),b=t(24308),N=t(21687),se=t(65632),i=t(22122);function x(e){return e!=null}var L=function(a){var l=a.itemPrefixCls,o=a.component,f=a.span,m=a.className,u=a.style,g=a.labelStyle,E=a.contentStyle,P=a.bordered,c=a.label,S=a.content,M=a.colon,T=o;if(P){var h;return r.createElement(T,{className:H()((h={},(0,D.Z)(h,"".concat(l,"-item-label"),x(c)),(0,D.Z)(h,"".concat(l,"-item-content"),x(S)),h),m),style:u,colSpan:f},x(c)&&r.createElement("span",{style:g},c),x(S)&&r.createElement("span",{style:E},S))}return r.createElement(T,{className:H()("".concat(l,"-item"),m),style:u,colSpan:f},r.createElement("div",{className:"".concat(l,"-item-container")},c&&r.createElement("span",{className:H()("".concat(l,"-item-label"),(0,D.Z)({},"".concat(l,"-item-no-colon"),!M)),style:g},c),S&&r.createElement("span",{className:H()("".concat(l,"-item-content")),style:E},S)))},z=L;function G(e,a,l){var o=a.colon,f=a.prefixCls,m=a.bordered,u=l.component,g=l.type,E=l.showLabel,P=l.showContent,c=l.labelStyle,S=l.contentStyle;return e.map(function(M,T){var h=M.props,U=h.label,K=h.children,y=h.prefixCls,d=y===void 0?f:y,n=h.className,s=h.style,C=h.labelStyle,R=h.contentStyle,w=h.span,F=w===void 0?1:w,I=M.key;return typeof u=="string"?r.createElement(z,{key:"".concat(g,"-").concat(I||T),className:n,style:s,labelStyle:(0,i.Z)((0,i.Z)({},c),C),contentStyle:(0,i.Z)((0,i.Z)({},S),R),span:F,colon:o,component:u,itemPrefixCls:d,bordered:m,label:E?U:null,content:P?K:null}):[r.createElement(z,{key:"label-".concat(I||T),className:n,style:(0,i.Z)((0,i.Z)((0,i.Z)({},c),s),C),span:1,colon:o,component:u[0],itemPrefixCls:d,bordered:m,label:U}),r.createElement(z,{key:"content-".concat(I||T),className:n,style:(0,i.Z)((0,i.Z)((0,i.Z)({},S),s),R),span:F*2-1,component:u[1],itemPrefixCls:d,bordered:m,content:K})]})}var oe=function(a){var l=r.useContext(A),o=a.prefixCls,f=a.vertical,m=a.row,u=a.index,g=a.bordered;return f?r.createElement(r.Fragment,null,r.createElement("tr",{key:"label-".concat(u),className:"".concat(o,"-row")},G(m,a,(0,i.Z)({component:"th",type:"label",showLabel:!0},l))),r.createElement("tr",{key:"content-".concat(u),className:"".concat(o,"-row")},G(m,a,(0,i.Z)({component:"td",type:"content",showContent:!0},l)))):r.createElement("tr",{key:u,className:"".concat(o,"-row")},G(m,a,(0,i.Z)({component:g?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},l)))},ie=oe,_=function(a){var l=a.children;return l},V=_,ce=t(96159),A=r.createContext({}),ee={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function J(e,a){if(typeof e=="number")return e;if((0,B.Z)(e)==="object")for(var l=0;l<b.c4.length;l++){var o=b.c4[l];if(a[o]&&e[o]!==void 0)return e[o]||ee[o]}return 3}function te(e,a,l){var o=e;return(a===void 0||a>l)&&(o=(0,ce.Tm)(e,{span:l}),(0,N.Z)(a===void 0,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),o}function Q(e,a){var l=(0,re.Z)(e).filter(function(u){return u}),o=[],f=[],m=a;return l.forEach(function(u,g){var E,P=(E=u.props)===null||E===void 0?void 0:E.span,c=P||1;if(g===l.length-1){f.push(te(u,P,m)),o.push(f);return}c<m?(m-=c,f.push(u)):(f.push(te(u,c,m)),o.push(f),m=a,f=[])}),o}function de(e){var a,l=e.prefixCls,o=e.title,f=e.extra,m=e.column,u=m===void 0?ee:m,g=e.colon,E=g===void 0?!0:g,P=e.bordered,c=e.layout,S=e.children,M=e.className,T=e.style,h=e.size,U=e.labelStyle,K=e.contentStyle,y=r.useContext(se.E_),d=y.getPrefixCls,n=y.direction,s=d("descriptions",l),C=r.useState({}),R=(0,ae.Z)(C,2),w=R[0],F=R[1],I=J(u,w);r.useEffect(function(){var X=b.ZP.subscribe(function(W){(0,B.Z)(u)==="object"&&F(W)});return function(){b.ZP.unsubscribe(X)}},[]);var ne=Q(S,I);return r.createElement(A.Provider,{value:{labelStyle:U,contentStyle:K}},r.createElement("div",{className:H()(s,(a={},(0,D.Z)(a,"".concat(s,"-").concat(h),h&&h!=="default"),(0,D.Z)(a,"".concat(s,"-bordered"),!!P),(0,D.Z)(a,"".concat(s,"-rtl"),n==="rtl"),a),M),style:T},(o||f)&&r.createElement("div",{className:"".concat(s,"-header")},o&&r.createElement("div",{className:"".concat(s,"-title")},o),f&&r.createElement("div",{className:"".concat(s,"-extra")},f)),r.createElement("div",{className:"".concat(s,"-view")},r.createElement("table",null,r.createElement("tbody",null,ne.map(function(X,W){return r.createElement(ie,{key:W,index:W,colon:E,prefixCls:s,vertical:c==="vertical",bordered:P,row:X})}))))))}de.Item=V;var ue=de},98858:function(ve,Y,t){"use strict";var D=t(43673),ae=t.n(D),B=t(19422),r=t.n(B)}}]);
